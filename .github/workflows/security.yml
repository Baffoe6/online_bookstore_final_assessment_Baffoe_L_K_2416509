name: Security Scan

on:
  workflow_call:

jobs:
  security:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Install tools
      run: |
        pip install bandit safety

    - name: Run Bandit
      run: |
        bandit -r . -f json -o bandit-report.json || true

    - name: Run Safety
      run: |
        safety check --json --output safety-report.json || true

    - name: Upload reports
      uses: actions/upload-artifact@v4
      with:
        name: security-reports
        path: |
          bandit-report.json
          safety-report.json
